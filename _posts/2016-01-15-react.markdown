---
layout: post
title:  "Reactjs"
categories: React
comments: true
tag: React
---

* content
{:toc}

ReactJs





# [Reactå®˜ç½‘](https://facebook.github.io/react/)

# [æˆ‘çš„Reactç»ƒä¹ ](https://github.com/ccppchen/reactDemo)

ç”¨çš„æ˜¯yeomanä¸Šçš„reactç”Ÿæˆå™¨ï¼Œ

##å®‰è£…æ–¹æ³•ï¼š

{% highlight ruby %}
npm install -g generator-react
{% endhighlight %}

##ä½¿ç”¨æ–¹æ³•ï¼š

{% highlight ruby %}
yo react
{% endhighlight %}

## Reactå­¦ä¹ ç¬”è®° ğŸ“’

1ã€React.createClass  æ˜¯åˆ›å»ºä¸€ä¸ªç»„ä»¶

{% highlight ruby %}
React.renderComponent({component,el}) æ¸²æŸ“ç»„ä»¶

æˆ–è€…

React.render({component,el}) æ¸²æŸ“ç»„ä»¶
{% endhighlight %}

2ã€åˆå§‹å€¼
	getInitialState æ˜¯è®¾å®šåˆå§‹çš„å€¼ï¼Œ è®¿é—®é‡Œé¢çš„å€¼ç”¨this.state.XX

	ä¿®æ”¹å¹¶ä¸”é‡æ–°æ¸²æŸ“ç”¨this.setState({XX:â€XXâ€});

3ã€åŒ¹é…å¯¹è±¡é‡Œé¢çš„key ç”¨ï¼š

{% highlight ruby %}
var Obj = {

	â€œkeyâ€: â€œval1â€,

	â€œkey2â€: â€œval2"

}

Obj[key]  å¯ä»¥è®¿é—®åˆ°val1
{% endhighlight %}

4ã€è®¾ç½®ç±»classï¼š

	1æ˜¯è®¾ç½®classNameå±æ€§ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œ

	2æ˜¯è®¾ç½®style={style}å±æ€§ var style = {fontSize: 44}

5ã€ç”Ÿå‘½å‘¨æœŸ

{% highlight ruby %}
componentDidMountæ˜¯åˆæ¬¡æ¸²æŸ“ï¼Œåªä¼šæ¸²æŸ“ä¸€æ¬¡ï¼Œ

componentWillMountæ˜¯å³å°†æ¸²æŸ“

componentWillReceiveProps(nextProps) - ç»„ä»¶å®ä¾‹å³å°†è®¾ç½®æ–°å±æ€§æ—¶è¢«è°ƒç”¨

shouldComponentUpdate(nextProps, nextState) - ç»„ä»¶å®ä¾‹å³å°†é‡æ–°æ¸²æŸ“æ—¶è¢«è°ƒç”¨

componentWillUpdate(nextProps, nextState) - ç»„ä»¶å®ä¾‹å³å°†é‡æ–°æ¸²æŸ“æ—¶è¢«è°ƒç”¨

componentWillUnmount() - ç»„ä»¶å®ä¾‹å³å°†ä»DOMæ ‘ç§»é™¤æ—¶è¢«è°ƒç”¨
{% endhighlight %}

6ã€è·å–DOMèŠ‚ç‚¹

{% highlight ruby %}
this.refs.textarea.getDOMNode()

æˆ–è€…

React.findDOMNode(this.refs.goodRef)
{% endhighlight %}

7ã€css3åŠ¨ç”»

  * ä¸ºå…ƒç´ å£°æ˜transitionæ ·å¼

  * è®¾ç½®å±æ€§åˆå§‹å€¼ï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“å…ƒç´ 

  * è®¾ç½®å±æ€§ç›®æ ‡å€¼ï¼Œç¬¬äºŒæ¬¡æ¸²æŸ“å…ƒç´ 

  éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯window.getComputedStyle()æ–¹æ³•çš„åº”ç”¨ï¼Œè°ƒç”¨ è¿™ä¸ªæ–¹æ³•çš„ç›®çš„æ˜¯åˆ·æ–°DOMçš„æ ·å¼ï¼Œä»¥ä¾¿ç¡®ä¿ä¹‹å‰è®¾ç½®çš„æ ·å¼å·²ç»è¢«åº”ç”¨åˆ°DOM ä¸Šäº†ã€‚

  {% highlight ruby %}
// css3åŠ¨ç”»
var css3 = React.createClass({
	getDefaultProps: function() {
		return {
			value: 200
		};
	},
	getInitialState: function() {
		return {
			value: 0,
			mounted: false
		};
	},
	componentDidMount: function() {
		this.setState({
			mounted: false
		});
	},
	shouldComponentUpdate: function(nextProps, nextState) {
		if(nextProps.value > 220 || nextProps.value < 0) return false;
		return true;
	},
	handleClick: function (){
		this.setState({
			mounted: !this.state.mounted
		});
	},
  render: function() {
  	// é€Ÿåº¦æ˜¯0æ—¶çš„æ—‹è½¬è§’åº¦
  	var degree = -201;
  	if (this.state.mounted) {
  		degree = (this.props.value / 220) * 265 - 201;
  		window.getComputedStyle(this.refs.image.getDOMNode()).transform;
  	};

  	//è¡¨é’ˆæ ·å¼
		var style={
			transform : "rotate("+degree+"deg)"
		};
      return (
          <div className="ez-gauge" onClick={this.handleClick}>
          	<img src="images/gauge.jpg" alt=""/>
          	<img src="images/gauge-pointer.jpg" ref="image" className="pointer" style={style} />
          </div>
      );
  }
});
React.render(
	<div>
	<css3 value="200" />
	</div>,
	document.getElementById('app')
);
  {% endhighlight %}

8ã€è·å–ç”¨æˆ·è¾“å…¥çš„å€¼

	{% highlight ruby %}
// è·å–DOMèŠ‚ç‚¹çš„å€¼ï¼Œrefs
var refNode = React.createClass({
	getInitialState: function() {
		return {
			account: '',
			password: '',
			select: 'A',
			radio: 'A',
			checkbox: [],
			textarea: 'this id textarea!!!'
		};
	},
	handleSubmit: function (e){
		e.preventDefault();
		// console.log(e.native());
		var formDate = {
			account: this.refs['account'].getDOMNode().value,
			password: this.refs['password'].getDOMNode().value,
			select: this.refs['select'].getDOMNode().value,
			radio: this.state.radio,
			checkbox: this.state.checkbox,
			textarea: this.refs['textarea'].getDOMNode().value
		};

		console.log(formDate);
	},
	goodRadio: function (e){
		this.setState({
			radio: e.target.value
		});
	},
	goodCheck: function (e){
		var checkValue = this.state.checkbox.slice();
		var newVal = e.target.value;
		var index = checkValue.indexOf(newVal);
		if (index == -1) {
			checkValue.push( newVal );
		}else{
			checkValue.splice(index, 1)
		}
		this.setState({
			checkbox: checkValue
		});
	},
    render: function() {
        return (
        	<form onSubmit={this.handleSubmit} className = "ez-login">
				<div className="row title">
					<h1>ç™»å½•</h1>
				</div>
				<div className="row account">
					<label>ç”¨æˆ·</label>
					<input type="text" defaultValue="" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" ref="account"/>
				</div>
				<div className="row pass">
					<label>å¯†ç </label>
					<input type="password" ref="password" placeholder="è¯·è¾“å…¥å¯†ç " ref="password"/>
				</div>
				<div classNmae="row">
					<select defaultValue="A" ref="select">
						<option value="A">A</option>
						<option value="B">B</option>
						<option value="C">C</option>
					</select>
				</div>
				<div className="row">
					A
					<input onChange={this.goodRadio} type="radio" value="A" name="goodRadio" defaultChecked/>
					B
					<input onChange={this.goodRadio} type="radio" value="B" name="goodRadio"/>
					C
					<input onChange={this.goodRadio} type="radio" value="C" name="goodRadio"/>
				</div>
				<div className="remember">
					<input onChange={this.goodCheck} type="checkbox" name="goodCheckbox" value="0"/>
					ç©æ¸¸æˆ
					<input onChange={this.goodCheck} type="checkbox" name="goodCheckbox" value="1"/>
					æ³¡å¦
					<input onChange={this.goodCheck} type="checkbox" name="goodCheckbox" value="2"/>
					ä¸Šç½‘
				</div>
				<div className="row"></div>
					<textarea name="" defaultValue={this.state.textarea} ref="textarea"></textarea>
				<div className="row button">
					<button type="submit">ç™»å½•</button>
				</div>
			</form>
        );
    }
});
React.render(
	<div>
		<refNode />
	</div>,
	document.getElementById('app')
);
	{% endhighlight %}
